!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).SmartFormValidator=t()}(this,(function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t={argNamesAreReserved:"The following :argNames: are reserved and cannot be used as :argTypes:: \n:argValues:",fieldCannotBeEmpty:"The `:field:` field expects a non-empty :type:",fieldNotRegistered:'No field with the specified id (":id:") has been registered on this :element:',functionParamExpectsType:"The `:param:` argument expects :type:",functionParamIsRequired:"The `:param:` argument is required",htmlElementExpected:"The `:param:` argument expects an HTML `:elementType:` element",noObjectWithSpecifiedKey:"No :object: with the key `:key:` exists",noEffectsActive:"There are no active effects set on this field. \nYou can set an effect by calling `useEffect(effect)`",noValidatorsActive:"There are no active validators for this field. You can do one of the following to fix this issue: 1. Re-enable any disabled validators by calling `enableValidator(key)` \n2. Add a rule using the `addRule(rule)` method \n3. Add a validator using the `addValidator(key, validator, meta)` method",objectPropertyCannotBeEmpty:"The `:prop:` property of the `:object:` object cannot be empty",objectMustHaveProperty:"The `:param:` argument must have a `:prop:` property",objectsMustHaveProperty:"The `:paramA:` argument must have a `:propA:` property or The `:paramB:` argument must have a `:propB:` property",objectPropertyShouldHaveType:"The `:prop:` property of the `:object:` object shoulde be :type:",objectWithKeyExists:":object: with key `:key:` already exists",objectWithKeyExistsCanReplace:":object: with key `:key:` already exists. Use `:replacer:` to replace it.",unknownType:"Unknown :type:: `:typeName:`, allowed :types: are: :allowedTypes:"};function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],u=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){s=!0,i=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw i}}return c}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s,l,f,d,p,m,h,y,v,g,b,E,w,j,A,S,T,L,x,V,N,F,I,O,R,C,P,k,D,B,M,z,Z,q,W,K,H,$,J,U,Y,G,Q,X,ee,te,re,ne,ie,ae,oe,ce,ue,se,le,fe,de,pe,me,he,ye,ve=t,ge={array:Ee,function:function(e){return"function"==typeof e},number:function(e){return"number"==typeof(e=Number(e))&&!Number.isNaN(e)},object:we,string:function(e){return"string"==typeof e}},be={is:ge,object:{clone:je,cloneAndExtend:function(e,t){return we(e)&&we(t)?Object.assign(je(e),t):e},has:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},createListFromArray:Ae,generateEffectName:Se,getEffectNames:function(e){var t=Object.values(e);return t.map((function(e){return e.name}))},getValidatorNames:function(e){return Object.keys(e)},isSubmitBtn:function(e){return"submit"===e.type||"submit-button"===e.role},normalizeId:function(e){return String(e).trim()},preEffectRegistrationCheck:function(e,t){if(!ge.object(e))throw new TypeError(ve.functionParamExpectsType.replace(":param:","effect").replace(":type:","an object"));var r=e.name,i=e.meta,a=e.valid,o=e.invalid;if(!ge.string(r))throw new TypeError(ve.functionParamExpectsType.replace(":param:","effect.name").replace(":type:","a string"));var c="";if(r=r.trim(),!ge.function(a))throw new TypeError(ve.functionParamExpectsType.replace(":param:","effect.valid").replace(":type:","a function"));if(!ge.function(o))throw new TypeError(ve.functionParamExpectsType.replace(":param:","effect.invalid").replace(":type:","a function"));ge.object(i)&&ge.string(i.namespace)&&(c=i.namespace.trim());var u=Se(r,c);if(0===u.length)throw new TypeError(ve.fieldCannotBeEmpty.replace(":field:","effect.name").replace(":type:","string"));if(t.includes(u))throw new TypeError(ve.argNamesAreReserved.replace(":argNames:","names").replace(":argTypes:","effect names").replace(":argValues:",Ae(t)));return n(n({},e),{},{name:u})},preValidatorRegistrationCheck:function(e,t,r,n){if(!ge.string(e))throw new TypeError(ve.functionParamExpectsType.replace(":param:","validatorKey").replace(":type:","a string"));var i="";if(!(e=e.trim()))throw new TypeError(ve.fieldCannotBeEmpty.replace(":field:","validatorKey").replace(":type:","string"));ge.object(r)&&ge.string(r.namespace)&&(i=r.namespace.trim());if(e=Te(e,i),n.includes(e))throw new TypeError(ve.argNamesAreReserved.replace(":argNames:","keys").replace(":argTypes:","validator keys").replace(":argValues:",Ae(n)));if(!ge.function(t))throw new TypeError(ve.functionParamExpectsType.replace(":param:","validatorFn").replace(":type:","a function"));return e},validateId:function(e){return["number","string"].includes(i(e))&&Boolean(e)},APP_CLASSNAME:"sfv",DISABLED_FIELD_CLASSNAME:"sfv-disabled",SMART_FIELD_CLASSNAME:"sfv-sf",VALID_FIELD_CLASSNAME:"sfv-ok",INVALID_FIELD_CLASSNAME:"sfv-error"};function Ee(e){return Array.isArray(e)}function we(e){return"object"===i(e)&&e&&!Ee(e)}function je(e){return we(e)?Object.assign({},e):e}function Ae(e,t){return"string"!=typeof t&&(t="\t\n* "),"".concat(t).concat(e.join(t))}function Se(e,t){return e=ge.string(e)?e.trim():"",t=ge.string(t)?t.trim():"",e.length>0&&t.length>0?"".concat(t,".").concat(e):e.length>0?e:""}function Te(e,t){return e.length>0&&t.length>0?"".concat(t,".").concat(e):e.length>0?e:""}function Le(){if(l)return s;l=1;var e=be.is;return s={isSubmitButton:function(t){return e.object(t)&&("submit"===t.type||"submit-button"===t.role)}}}function xe(){if(d)return f;d=1;var e=be.is,t=be.VALID_FIELD_CLASSNAME,r=be.INVALID_FIELD_CLASSNAME,n=Le().isSubmitButton;return f={name:"addBottomBorder",meta:{},valid:function(i){if(!e.object(i)||n(i))return;i.classList.remove(r),i.classList.add(t)},invalid:function(i){if(!e.object(i)||n(i))return;i.classList.remove(t),i.classList.add(r)}}}function Ve(){if(m)return p;m=1;var e=be.is,t=be.VALID_FIELD_CLASSNAME,r=be.INVALID_FIELD_CLASSNAME,n=Le().isSubmitButton;return p={name:"addValidationStatusIcons",meta:{},valid:function(i){if(!e.object(i)||n(i))return;i.classList.remove(r),i.classList.add(t)},invalid:function(i){if(!e.object(i)||n(i))return;i.classList.remove(t),i.classList.add(r)}}}function Ne(){if(y)return h;y=1;var e=be.APP_CLASSNAME,t=be.DISABLED_FIELD_CLASSNAME,r=Le().isSubmitButton;function n(n,i){try{if(!r(i))return;var a=i;n?(a.removeAttribute("disabled"),a.classList.remove(e),a.classList.remove(t)):(a.setAttribute("disabled",!0),a.classList.add(e),a.classList.add(t))}catch(e){console.log("Unable to modify the submit button state: ",e.message)}}return h={name:"toggleSubmitButton",meta:{},init:function(e){n(!1,e)},valid:function(e){n(!0,e)},invalid:function(e){n(!1,e)}}}function Fe(){return g?v:(g=1,v={addBottomBorder:xe(),addValidationStatusIcons:Ve(),toggleSubmitButton:Ne()})}function Ie(){if(E)return b;E=1;var e=be.is,t=be.object,r=["g","m"];function n(r){var n,i=t.clone(r)||{};if(i.min&&i.max){if(Number(i.min)>Number(i.max)){var a=i.min;i.min=i.max,i.max=a}n="{".concat(i.min,",").concat(i.max,"}")}else i.min?n="{".concat(i.min,",}"):i.max?n="{0,".concat(i.max,"}"):e.number(i)&&(n="{0,".concat(i,"}"));return n}function i(e){return e?r.join(""):[].concat(r,["i"]).join("")}return b={createAlphanumericRegexObject:function(e,t,r){var a;a=t.length?n(t.length):r||"+";return e="".concat(e).concat(a),e="^".concat(e,"$"),new RegExp(e,i(t.matchCase))},getLengthRegex:n,getRegexRules:i}}function Oe(){if(j)return w;j=1;var e=Ie().createAlphanumericRegexObject;return w=function(t,r){if(!r.type||"alnum"!==r.type)return!0;if(!t)return!1;var n=r.allowWhitespace?"[A-Z0-9\\s_-]":"[A-Z0-9_-]";return e(n,r).test(t)}}function Re(){if(S)return A;S=1;var e=Ie().createAlphanumericRegexObject;return A=function(t,r){if(!r.type||"alpha"!==r.type)return!0;if(!t||"string"!=typeof t)return!1;var n=r.allowWhitespace?"[A-Z\\s_-]":"[A-Z_-]";return e(n,r).test(t)}}function Ce(){if(L)return T;L=1;var e=Ie().createAlphanumericRegexObject;return T=function(t,r){if(!r.type||"ascii"!==r.type)return!0;if(!t)return!1;return e("[A-Z0-9`~!@#$%^&*()-+=\\[\\]{}\\\\;:'\"|<>?\\,\\.?\\/\\s_-]",r).test(t)}}function Pe(){if(V)return x;V=1;var e=/^[-!#$%&'*+/0-9=?A-Z^_a-z`{|}~](\.?[-!#$%&'*+/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/;return x=function(t,r){if(!r.type||"email"!==r.type)return!0;if(!t||"string"!=typeof t)return!1;var n=t.split("@");if(2!==n.length)return!1;var i=o(n,2),a=i[0],c=i[1];return!(a.length>64||c.length>255)&&(!c.split(".").some((function(e){return e.length>63}))&&e.test(t))}}function ke(){if(F)return N;F=1;var e=be.is,t=Ie().createAlphanumericRegexObject;return N=function(r,n){if(!e.number(n.length)&&!e.object(n.length))return!0;if(null==r||!1===r)return!1;return t("[A-Z0-9.\\s_-]",n,"*").test(r)}}function _e(){if(O)return I;O=1;var e=Ie().createAlphanumericRegexObject;return I=function(t,r){if(!r.type||"number"!==r.type)return!0;if(""===t||null==t)return!1;var n=r.allowWhitespace?"[0-9\\s]":"[0-9]";return e(n,r).test(t)}}function De(){if(C)return R;C=1;var e=be.is;return R=function(t,r){if(!r.regex)return!0;var n=r.regex;return(e.object(n)?n:new RegExp(n)).test(t)}}function Be(){return B?D:(B=1,D={alphanumericValidator:Oe(),alphaValidator:Re(),asciiTextValidator:Ce(),emailValidator:Pe(),lengthValidator:ke(),numberValidator:_e(),regexValidator:De(),requiredFieldValidator:k?P:(k=1,P=function(e,t,r,n){return!t.required||""!==e&&void 0!==e&&("checkbox"===t.type?n.checked&&"on"===e:e.length>0)})})}function Me(){if(z)return M;z=1;var e=Fe(),r=t,i=be.APP_CLASSNAME,a=be.DISABLED_FIELD_CLASSNAME,o=be.SMART_FIELD_CLASSNAME,u=be.VALID_FIELD_CLASSNAME,s=be.INVALID_FIELD_CLASSNAME,l=be.is,f=be.object,d=be.generateEffectName,p=be.getEffectNames,m=be.getValidatorNames,h=be.preEffectRegistrationCheck,y=be.preValidatorRegistrationCheck,v=be.isSubmitBtn,g=be.normalizeId,b=be.validateId,E=Be(),w=Object.values(e),j=p(e),A=Object.entries(E),S=m(E);function T(e,t){if(!l.object(e))throw new TypeError(r.functionParamExpectsType.replace(":param:","element").replace(":type:","object"));if(!b(e.id)&&!v(e))throw new TypeError(r.objectPropertyShouldHaveType.replace(":prop:","id").replace(":object:","element").replace(":type:","a string or a number"));if(0===g(e.id).length&&!v(e))throw new TypeError(r.objectPropertyCannotBeEmpty.replace(":prop:","id").replace(":object:","element"));if(void 0!==e.getValue&&"function"!=typeof e.getValue)throw new TypeError(r.objectPropertyShouldHaveType.replace(":prop:","getValue").replace(":object:","element").replace(":type:","a function"));v(e)&&(this.role="submit-button"),this.id=e.id,this.element=e,this.defaultEffects=new Map,this.defaultValidators=new Map(A),this.effects=new Map,this.validators=new Map;var i,a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}(w);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=o.name,s=o.meta,f=o.init,d=o.valid,p=o.invalid;this.defaultEffects.set(u,{meta:s,init:f,valid:d,invalid:p}),l.function(f)&&f(this.element)}}catch(e){a.e(e)}finally{a.f()}l.object(t)&&this.addRule(n(n({},t),{},{fieldId:e.id})),L(e)}function L(e){var t,r;null===(t=e.classList)||void 0===t||t.add(i),null===(r=e.classList)||void 0===r||r.add(o)}return M=T,T.prototype.addRule=function(e){var t=this.rule;return l.object(t)&&l.object(e)?this.rule=f.cloneAndExtend(t,e):this.rule=e,this},T.prototype.removeRule=function(e){var t=this.rule;return l.object(t)?(e?delete this.rule[e]:delete this.rule,this):this},T.prototype.getRule=function(e){return e&&this.rule?void 0!==this.rule[e]?this.rule[e]:null:this.rule||null},T.prototype.getEffect=function(e,t){e=l.string(e)?e.trim().toLowerCase():"",t=l.string(t)?t.trim().toLowerCase():"";var r=d(e,t);return this.effects.has(r)?this.effects.get(r):null},T.prototype.getEffects=function(e){e=l.string(e)?e.toLowerCase().trim():"";var t={default:this.defaultEffects,addon:this.effects};return["addon","default"].includes(e)?t[e]:t},T.prototype.useEffect=function(e){var t=h(e,j),n=t.name,i=t.meta,a=t.init,o=t.valid,c=t.invalid;if(this.usesEffect(n))throw new TypeError(r.objectWithKeyExists.replace(":object:","An effect").replace(":key:",n));return this.effects.set(n,{meta:i,init:a,valid:o,invalid:c}),l.function(a)&&a(this.getElement()),this},T.prototype.usesEffect=function(e,t){if(l.string(e)){e=e.trim().toLowerCase(),t=l.string(t)?t.trim().toLowerCase():"";var r=d(e,t);return this.effects.has(r)}return this.effects.size>0},T.prototype.addValidator=function(e,t,n){if(e=y(e,t,n,S),this.hasValidator(e))throw new TypeError(r.objectWithKeyExists.replace(":object:","A validator").replace(":key:",e));return this.validators.set(e,t),this},T.prototype.getValidators=function(e){e=l.string(e)?e.toLowerCase().trim():"";var t={default:this.defaultValidators,addon:this.validators};return["addon","default"].includes(e)?t[e]:t},T.prototype.hasValidator=function(e){return l.string(e)&&(e=e.trim().toLowerCase()),l.string(e)?this.validators.has(e):this.validators.size>0},T.prototype.getElement=function(){return this.element},T.prototype.getValue=function(){var e,t,r,n,i=this.getElement();if("function"==typeof i.getValue)r=i.getValue();else if("checkbox"===(null===(e=i.type)||void 0===e?void 0:e.toLowerCase()))r=i.value;else if("select"===(null===(t=i.tagName)||void 0===t?void 0:t.toLowerCase())){var a;r=null===(a={value:(n=i).value,text:n.options[n.selectedIndex].text})||void 0===a||null===(a=a.value)||void 0===a?void 0:a.trim()}else void 0!==i.value?r=i.value:i.isContentEditable&&void 0!==i.textContent&&(r=i.textContent);return l.string(r)?r.trim():r},T.prototype.validate=function(){var e=this.getValidators(),t=e.default,n=e.addon,i=Array.from(t.values()).concat(Array.from(n.values()));if(0===i.length)throw new TypeError(r.noValidatorsActive);var a=this.getEffects(),o=a.default,c=a.addon,u=Array.from(o.values()).concat(Array.from(c.values()));if(0===u.length)throw new TypeError(r.noEffectsActive);var s=this.getRule(),l=this.getElement(),f=this.getValue(),d={};s.required&&"checkbox"===l.type&&(d.checked=l.checked);var p=i.reduce((function(e,t){return e&&t(f,s,e,d)}),!0);return u.forEach((function(e){var t=e.valid,r=e.invalid;p?t(l):r(l)})),p},T.prototype.watch=function(e){var t,r=this,n=this.getElement();if("checkbox"===n.type)t="click";else t="input";n.addEventListener(t,(function(){return r.validate(_,e)}))},T.prototype.reset=function(){var e=this.getElement(),t=this.getEffects(),r=t.default,n=t.addon,c=Array.from(r.values()).concat(Array.from(n.values()));e.classList.remove(i),e.classList.remove(a),e.classList.remove(o),e.classList.remove(u),e.classList.remove(s),L(e),c.length>0&&c.forEach((function(t){l.function(t.init)&&t.init(e)}))},M}function ze(){if(q)return Z;q=1;var e=t,r=be.is,n=be.isSubmitBtn,i=be.normalizeId,a=be.validateId,o=Me();return Z=function(t,c){if("string"==typeof t&&(t=document.getElementById(t)),!r.object(t))throw new TypeError(e.functionParamExpectsType.replace(":param:","input").replace(":type:","object"));if(!a(t.id)&&!n(t))throw new TypeError(e.objectPropertyShouldHaveType.replace(":prop:","id").replace(":object:","input").replace(":type:","a string or a number"));return this.getField(i(t.id))?r.object(c)&&(c.field=t.id,this.addRule(c)):this.fields.push(new o(t,c)),this}}function Ze(){if(K)return W;K=1;var e=be.is;return W=function(t){var r=this;return e.array(t)&&t.length>0&&t.forEach((function(e){return r.addField(e.field,e.rule)})),this}}function qe(){if($)return H;$=1;var e=t,r=be.is,n=be.object;return H=function(t){if(!r.object(t))throw new TypeError(e.functionParamExpectsType.replace(":param:","rule").replace(":type:","object"));if(!n.has(t,"field"))throw new TypeError(e.objectMustHaveProperty.replace(":param:","rule").replace(":prop:","field"));var i=r.object(t.field)?t.field.id:t.field,a=this.getField(i);if(!a)throw new TypeError(e.fieldNotRegistered.replace(":element:","validator").replace(":id:",i));return a.addRule(t),this}}function We(){if(U)return J;U=1;var e=t,r=be.getValidatorNames,n=be.preValidatorRegistrationCheck,i=r(Be());return J=function(t,r,a){if(this.validators=this.validators||{},t=n(t,r,a,i),this.validators[t])throw new TypeError(e.objectWithKeyExists.replace(":object:","A validator").replace(":key:",t));this.validators[t]=r,"function"==typeof this.getFields&&this.getFields().forEach((function(e){e.hasValidator(t)||e.addValidator(t,r,a)}))}}function Ke(){if(G)return Y;G=1;for(var e=Fe(),t=be.is,r={},n=0,i=Object.values(e);n<i.length;n++){var a=i[n],o=a.name,c=a.meta,u=a.init,s=a.valid,l=a.invalid;r[o]={meta:c,init:u,valid:s,invalid:l}}return Y=function(e){e=t.string(e)?e.trim().toLowerCase():"";var n=this.effects||null;if(!["addon","default"].includes(e))return{default:r,addon:n};switch(e){case"default":return r;case"addon":return n}}}function He(){if(X)return Q;X=1;var e=be.normalizeId;return Q=function(t){return this.getFields().find((function(r){return e(r.id)===e(t)}))||null}}function $e(){return te?ee:(te=1,ee=function(){return this.fields})}function Je(){if(ne)return re;ne=1;for(var e=Be(),t=be.is,r={},n=0,i=Object.entries(e);n<i.length;n++){var a=o(i[n],2),c=a[0],u=a[1];r[c]=u}return re=function(e){e=t.string(e)?e.trim().toLowerCase():"";var n=this.validators||null;if(!["addon","default"].includes(e))return{default:r,addon:n};switch(e){case"default":return r;case"addon":return n}}}function Ue(){if(ae)return ie;ae=1;var e=be.is;return ie=function(t,r){var n=e.object(t)?t.id:t,i=this.getField(n);return i&&i.removeRule(r),this}}function Ye(){return ce?oe:(ce=1,oe=function(){"function"==typeof this.getFields&&this.getFields().forEach((function(e){e.reset()}))})}function Ge(){return se?ue:(se=1,ue=function(){return this.getFields()})}function Qe(){if(fe)return le;fe=1;var e=Fe(),r=t,n=be.getEffectNames,i=be.preEffectRegistrationCheck,a=n(e);return le=function(e){this.effects=this.effects||{};var t=i(e,a),n=t.name,o=t.meta,c=t.init,u=t.valid,s=t.invalid;if(this.effects[n])throw new TypeError(r.objectWithKeyExists.replace(":object:","An effect").replace(":key:",n));this.effects[n]={meta:o,init:c,valid:u,invalid:s},"function"==typeof this.getFields&&this.getFields().forEach((function(t){var r;t.usesEffect(e.name,null===(r=e.meta)||void 0===r?void 0:r.namespace)||t.useEffect(e)}))}}function Xe(){if(pe)return de;pe=1;var e=be.isSubmitBtn;return de=function(){return this.getFields().filter((function(t){return!e(t.getElement())})).map((function(e){return e.validate()})).every((function(e){return Boolean(e)}))}}function et(){if(he)return me;he=1;var e=t;function r(e){return"submit-button"===e.role}return me=function(t){var n,i,a=!1,o=this.form||this,c=this.getFields(),u=c.filter((function(e){return!r(e)})),s=null===(n=c.find(r))||void 0===n?void 0:n.getElement(),l=u.map((function(e){return Boolean(e.getRule())})),f=this.constructor.getEffects(),d=this.getEffects(),p=Object.assign({},f.default,f.addon,d.default,d.addon),m=Object.values(p),h=(i={},function(e,t,r){var n=!1,a=!1;return i[e.id]=i[e.id]||{},i[e.id].valid=t,Object.keys(i).length===r.length&&(a=!0,n=Object.values(i).every((function(e){return e.valid}))),{formValid:n,allFieldsValidated:a}});return u.forEach((function(r){var n=r.getElement();n.addEventListener(function(e){var t;if("checkbox"===e.type)t="click";else t="input";return t}(n),function(r,n){return function(){var i=r.validate(),c=h(r,i,l);a=c.formValid,"function"==typeof t&&(t(n,i),c.allFieldsValidated&&t(o,a)),function(t,r,n){if(0===r.length)throw new TypeError(e.noEffectsActive);r.forEach((function(e){var r=e.valid,i=e.invalid;t?r(n):i(n)}))}(a,m,s)}}(r,n))})),{valid:function(){return a}}},me}function tt(){return ye||(ye={"/src/methods/addField.js":ze,"/src/methods/addFields.js":Ze,"/src/methods/addRule.js":qe,"/src/methods/addValidator.js":We,"/src/methods/getEffects.js":Ke,"/src/methods/getField.js":He,"/src/methods/getFields.js":$e,"/src/methods/getValidators.js":Je,"/src/methods/removeRule.js":Ue,"/src/methods/reset.js":Ye,"/src/methods/toJSON.js":Ge,"/src/methods/useEffect.js":Qe,"/src/methods/validate.js":Xe,"/src/methods/watch.js":et})}function rt(e){function t(t){var r=nt(t,e);if(null!==r)return tt()[r]();throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}return t.resolve=function(t){var r=nt(t,e);return null!==r?r:require.resolve(t)},t}function nt(e,t){var r,n=function(e){var t=e[0];if("/"===t||"\\"===t)return!1;var r=e[1],n=e[2];return!(!("."!==t||r&&"/"!==r&&"\\"!==r)||!("."!==t||"."!==r||n&&"/"!==n&&"\\"!==n))&&(":"!==r||"/"!==n&&"\\"!==n)}(e);"/"===(e=it(e))[0]&&(t="");for(var i=tt(),a=["",".js",".json"];!(r=it(n?t+"/node_modules/"+e:t+"/"+e)).endsWith("/..");){for(var o=0;o<a.length;o++){var c=r+a[o];if(i[c])return c}if(!n)break;var u=it(t+"/..");if(u===t)break;t=u}return null}function it(e){for(var t=(e=e.replace(/\\/g,"/")).split("/"),r=""===t[0],n=1;n<t.length;n++)"."!==t[n]&&""!==t[n]||t.splice(n--,1);for(n=1;n<t.length;n++)".."===t[n]&&n>0&&".."!==t[n-1]&&"."!==t[n-1]&&(t.splice(--n,2),n--);return e=t.join("/"),r&&"/"!==e[0]?e="/"+e:0===e.length&&(e="."),e}var at=t,ot=be.createListFromArray,ct=["addField","addFields","addRule","addValidator","getValidators","getEffects","getField","getFields","removeRule","reset","toJSON","useEffect","validate","watch"],ut=["getEffects","useEffect"],st=function(e,t){if("function"!=typeof e)throw new TypeError(at.functionParamExpectsType.replace(":param:","ctor").replace(":type:","(constructor) function"));if(!ct.includes(t))throw new TypeError(at.unknownType.replace(":type:","instance method").replace(":typeName:",t).replace(":types:","methods").replace(":allowedTypes:",ot(ct)));e.prototype[t]=rt("/src/methods")("./".concat(t))},lt=function(e,t){if("function"!=typeof e)throw new TypeError(at.functionParamExpectsType.replace(":param:","ctor").replace(":type:","(constructor) function"));if(!ut.includes(t))throw new TypeError(at.unknownType.replace(":type:","static method").replace(":typeName:",t).replace(":types:","methods").replace(":allowedTypes:",ot(ut)));e[t]=rt("/src/methods")("./".concat(t))};var ft=t,dt=be.is,pt=be.isSubmitBtn,mt=be.validateId,ht=st,yt=lt,vt=gt;function gt(e,t){var r=this;if("string"==typeof e&&(e=document.getElementById(e.trim())),!dt.object(e))throw new TypeError(ft.htmlElementExpected.replace(":param:","form").replace(":elementType:","form"));this.form=e,this.fields=[];var n=e.elements;n&&Array.from(n).forEach((function(e){(mt(e.id)||pt(e))&&r.addField(e)})),dt.array(t)&&t.forEach((function(t){var n=e.querySelector("#".concat(t.fieldId));n&&r.getField(n.id)&&r.addRule(t)}))}gt.prototype.addField=function(e,t){return Array.from(this.form.elements).map((function(e){return e.id})).includes(e.id)&&ze().call(this,e,t),this},["getEffects","useEffect"].forEach((function(e){yt(gt,e)})),["addRule","removeRule","getField","getFields","getEffects","reset","useEffect","toJSON","validate","watch"].forEach((function(e){ht(gt,e)}));var bt=st,Et=lt,wt=vt,jt=At;function At(){this.fields=[],this.form=null}return At.prototype.addForm=function(e,t){var r=new wt(e,t);return this.form=r.form,r},["getEffects","useEffect"].forEach((function(e){Et(At,e)})),["addField","addFields","addRule","removeRule","addValidator","getValidators","getField","getFields","getEffects","reset","useEffect","toJSON","validate","watch"].forEach((function(e){bt(At,e)})),e(jt)}));
//# sourceMappingURL=smart-form-validator.min.js.map
