{"version":3,"file":"smart-form-validator.js","sources":["../../src/error-messages.js","../../src/helpers.js","../../src/effects/effects-helpers.js","../../src/effects/add-bottom-border/index.js","../../src/effects/add-validation-status-icons/index.js","../../src/effects/toggle-submit-button/index.js","../../src/effects/index.js","../../src/validators/validator-helpers.js","../../src/validators/alphanumeric-validator.js","../../src/validators/alpha-validator.js","../../src/validators/ascii-text-validator.js","../../src/validators/email-validator.js","../../src/validators/length-validator.js","../../src/validators/number-validator.js","../../src/validators/regex-validator.js","../../src/validators/required-field-validator.js","../../src/validators/index.js","../../src/smart-field.js","../../src/methods/addField.js","../../src/methods/addFields.js","../../src/methods/addRule.js","../../src/methods/addValidator.js","../../src/methods/getEffects.js","../../src/methods/getField.js","../../src/methods/getFields.js","../../src/methods/getValidators.js","../../src/methods/removeRule.js","../../src/methods/toJSON.js","../../src/methods/useEffect.js","../../src/methods/validate.js","../../src/methods/watch.js","../../src/methods/index.js","../../src/smart-form.js","../../src/smart-form-validator.js","../../src/index.js"],"sourcesContent":["module.exports = {\n  argNamesAreReserved: \"The following :argNames: are reserved and cannot be used as :argTypes:: \\n:argValues:\",\n  fieldCannotBeEmpty: \"The `:field:` field expects a non-empty :type:\",\n  fieldNotRegistered: \"No field with the specified id (\\\":id:\\\") has been registered on this :element:\",\n  functionParamExpectsType: \"The `:param:` argument expects :type:\",\n  functionParamIsRequired: \"The `:param:` argument is required\",\n  htmlElementExpected: \"The `:param:` argument expects an HTML `:elementType:` element\",\n  noObjectWithSpecifiedKey: \"No :object: with the key `:key:` exists\",\n  noEffectsActive: \"There are no active effects set on this field. \\n\" +\n    \"You can set an effect by calling `useEffect(effect)`\",\n  noValidatorsActive: \"There are no active validators for this field. \" +\n    \"You can do one of the following to fix this issue: \" + \n    \"1. Re-enable any disabled validators by calling `enableValidator(key)` \\n\" + \n    \"2. Add a rule using the `addRule(rule)` method \\n\" +\n    \"3. Add a validator using the `addValidator(key, validator, meta)` method\",\n  objectPropertyCannotBeEmpty: \"The `:prop:` property of the `:object:` object cannot be empty\",\n  objectMustHaveProperty: \"The `:param:` argument must have a `:prop:` property\",\n  objectsMustHaveProperty: \"The `:paramA:` argument must have a `:propA:` property or The `:paramB:` argument must have a `:propB:` property\",\n  objectPropertyShouldHaveType: \"The `:prop:` property of the `:object:` object shoulde be :type:\",\n  objectWithKeyExists: \":object: with key `:key:` already exists\",\n  objectWithKeyExistsCanReplace: \":object: with key `:key:` already exists. Use `:replacer:` to replace it.\",\n  unknownType: \"Unknown :type:: `:typeName:`, allowed :types: are: :allowedTypes:\",\n};","\"use strict\";\n\nconst errorMessages = require(\"./error-messages\");\n\nconst APP_CLASSNAME = \"sfv\";\nconst SMART_FIELD_CLASSNAME = \"sfv-sf\";\nconst DISABLED_FIELD_CLASSNAME = \"sfv-disabled\";\nconst VALID_FIELD_CLASSNAME = \"sfv-ok\";\nconst INVALID_FIELD_CLASSNAME = \"sfv-error\";\n\nconst is = {\n  array: isArray,\n  function: isFunction,\n  number: isNumber,\n  object: isObject,\n  string: isString,\n};\n\nconst object = {\n  clone,\n  cloneAndExtend,\n  has: objectHas,\n};\n\n// eslint-disable-next-line\nmodule.exports = {\r\n  is,\n  object,\n  createListFromArray,\n  generateEffectName,\n  getEffectNames,\n  getValidatorNames,\n  isSubmitBtn,\n  normalizeId,\n  preEffectRegistrationCheck,\n  preValidatorRegistrationCheck,\n  validateId,\n  APP_CLASSNAME,\n  DISABLED_FIELD_CLASSNAME,\n  SMART_FIELD_CLASSNAME,\n  VALID_FIELD_CLASSNAME,\n  INVALID_FIELD_CLASSNAME,\n};\n\nfunction isArray(data) {\n  return Array.isArray(data);\n}\n\nfunction isFunction(data) {\n  return typeof data === \"function\";\n}\n\nfunction isNumber(num) {\n  num = Number(num);\n\n  return typeof num === \"number\" && !Number.isNaN(num);\n}\n\nfunction isObject(data) {\n  return (typeof data === \"object\" && data && !isArray(data));\n}\n\nfunction isString(data) {\n  return typeof data === \"string\";\n}\n\nfunction objectHas(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nfunction clone(obj) {\n  return isObject(obj) ? Object.assign({}, obj) : obj;\n}\n\nfunction cloneAndExtend(obj, newProps) {\n  if(isObject(obj) && isObject(newProps)) {\n    return Object.assign(clone(obj), newProps);\n  } else {\n    return obj;\n  }\n}\n\nfunction createListFromArray(array, combinator) {\n  if(typeof combinator !== \"string\") {\n    combinator = \"\\t\\n* \";\n  }\n\n  return `${combinator}${array.join(combinator)}`;\n}\n\nfunction generateEffectName(name, namespace) {\n  name = is.string(name) ? name.trim() : \"\";\n  namespace = is.string(namespace) ? namespace.trim() : \"\";\n\n  if(name.length > 0 && namespace.length > 0) {\n    return `${namespace}.${name}`;\n  } else if(name.length > 0) {\n    return name;\n  } else {\n    return \"\";\n  }\n}\n\nfunction getEffectNames(effects) {\n  const effectObjects = Object.values(effects);\n  const effectNames = effectObjects.map(effect => effect.name);\n\n  return effectNames;\n}\n\nfunction getValidatorNames(validators) {\n  return Object.keys(validators);\n}\n\nfunction isSubmitBtn(element) {\n  return element.type === \"submit\" || element.role === \"submit-button\";\n}\n\nfunction normalizeId(id) {\n  return String(id).trim();\n}\n\nfunction preEffectRegistrationCheck(effect, defaultEffectNames) {\n  if(!(is.object(effect))) {\n    throw new TypeError(\n      errorMessages.functionParamExpectsType\n        .replace(\":param:\", \"effect\")\n        .replace(\":type:\", \"an object\")\n    );\n  }\n\n  let { name, meta, valid, invalid } = effect;\n\n  if(!(is.string(name))) {\n    throw new TypeError(\n      errorMessages.functionParamExpectsType\n        .replace(\":param:\", \"effect.name\")\n        .replace(\":type:\", \"a string\")\n    );\n  }\n\n  let namespace = \"\";\n  name = name.trim();\n\n  if(!(is.function(valid))) {\n    throw new TypeError(\n      errorMessages.functionParamExpectsType\n        .replace(\":param:\", \"effect.valid\")\n        .replace(\":type:\", \"a function\")\n    );\n  }\n\n  if(!(is.function(invalid))) {\n    throw new TypeError(\n      errorMessages.functionParamExpectsType\n        .replace(\":param:\", \"effect.invalid\")\n        .replace(\":type:\", \"a function\")\n    );\n  }\n\n  if(is.object(meta) && is.string(meta.namespace)) {\n    namespace = meta.namespace.trim();\n  }\n\n  const effectName = generateEffectName(name, namespace);\n\n  if(effectName.length === 0) {\n    throw new TypeError(\n      errorMessages.fieldCannotBeEmpty\n        .replace(\":field:\", \"effect.name\")\n        .replace(\":type:\", \"string\")\n    );\n  }\n\n  if(defaultEffectNames.includes(effectName)) {\n    throw new TypeError(\n      errorMessages.argNamesAreReserved\n        .replace(\":argNames:\", \"names\")\n        .replace(\":argTypes:\", \"effect names\")\n        .replace(\":argValues:\", createListFromArray(defaultEffectNames))\n    );\n  }\n\n  return { ...effect, name: effectName };\n}\n\nfunction preValidatorRegistrationCheck(validatorKey, validatorFn, validatorMeta, defaultValidatorKeys) {\n  if(!(is.string(validatorKey))) {\n    throw new TypeError(\n      errorMessages.functionParamExpectsType\n        .replace(\":param:\", \"validatorKey\")\n        .replace(\":type:\", \"a string\")\n    );\n  }\n\n  let validatorNamespace = \"\";\n\n  validatorKey = validatorKey.trim();\n\n  if(!validatorKey) {\n    throw new TypeError(\n      errorMessages.fieldCannotBeEmpty\n        .replace(\":field:\", \"validatorKey\")\n        .replace(\":type:\", \"string\"));\n  }\n\n  if(is.object(validatorMeta) && is.string(validatorMeta.namespace)) {\n    validatorNamespace = validatorMeta.namespace.trim();\n  }\n\n  validatorKey = generateValidatorKey(validatorKey, validatorNamespace);  \n\n  if(defaultValidatorKeys.includes(validatorKey)) {\n    throw new TypeError(\n      errorMessages.argNamesAreReserved\n        .replace(\":argNames:\", \"keys\")\n        .replace(\":argTypes:\", \"validator keys\")\n        .replace(\":argValues:\", createListFromArray(defaultValidatorKeys))\n    );\n  }\n\n  if(!(is.function(validatorFn))) {\n    throw new TypeError(\n      errorMessages.functionParamExpectsType\n        .replace(\":param:\", \"validatorFn\")\n        .replace(\":type:\", \"a function\")\n    );\n  }\n\n  return validatorKey;\n}\n\nfunction validateId(id) {\n  return [\"number\", \"string\"].includes(typeof id) && Boolean(id);\n}\n\n\n// Helpers \nfunction generateValidatorKey(key, namespace) {\n  if(key.length > 0 && namespace.length > 0) {\n    return `${namespace}.${key}`;\n  } else if(key.length > 0) {\n    return key;\n  } else {\n    return \"\";\n  }\n}","const { is } = require(\"../helpers\");\n\n\nmodule.exports = {\n  isSubmitButton,\n};\n\n\nfunction isSubmitButton(element) {\n  return (\n    is.object(element) && (element.type === \"submit\" || element.role === \"submit-button\")\n  );\n}","const { is, VALID_FIELD_CLASSNAME, INVALID_FIELD_CLASSNAME } = require(\"../../helpers\");\nconst { isSubmitButton } = require(\"../effects-helpers\");\n\nmodule.exports = {\n  name: \"addBottomBorder\",\n  meta: {},\n  valid: handleValid,\n  invalid: handleInvalid,\n};\n\nfunction handleValid(field) {\n  if(!(is.object(field)) || isSubmitButton(field)) {\n    return;\n  }\n\n  field.classList.remove(INVALID_FIELD_CLASSNAME);\n  field.classList.add(VALID_FIELD_CLASSNAME);\n}\n  \nfunction handleInvalid(field) {\n  if(!(is.object(field)) || isSubmitButton(field)) {\n    return;\n  }\n\n  field.classList.remove(VALID_FIELD_CLASSNAME);\n  field.classList.add(INVALID_FIELD_CLASSNAME);\n}","const { is, VALID_FIELD_CLASSNAME, INVALID_FIELD_CLASSNAME } = require(\"../../helpers\");\nconst { isSubmitButton } = require(\"../effects-helpers\");\n\n\nmodule.exports = {\n  name: \"addValidationStatusIcons\",\n  meta: {},\n  valid: handleValid,\n  invalid: handleInvalid,\n};\n\n\nfunction handleValid(field) {\n  if(!(is.object(field)) || isSubmitButton(field)) {\n    return;\n  }\n\n  field.classList.remove(INVALID_FIELD_CLASSNAME);\n  field.classList.add(VALID_FIELD_CLASSNAME);\n}\n  \nfunction handleInvalid(field) {\n  if(!(is.object(field)) || isSubmitButton(field)) {\n    return;\n  }\n\n  field.classList.remove(VALID_FIELD_CLASSNAME);\n  field.classList.add(INVALID_FIELD_CLASSNAME);\n}","const { APP_CLASSNAME, DISABLED_FIELD_CLASSNAME } = require(\"../../helpers\");\nconst { isSubmitButton } = require(\"../effects-helpers\");\n\n\nmodule.exports = {\n  name: \"toggleSubmitButton\",\n  meta: {},\n  init,\n  valid: handleValid,\n  invalid: handleInvalid,\n};\n\n\nfunction init(field) {\n  // Initially disable the submit button\n  canSubmitForm(false, field);\n}\n\nfunction handleValid(field) {\n  canSubmitForm(true, field);\n}\n  \nfunction handleInvalid(field) {\n  canSubmitForm(false, field);\n}\n\n\n// Helper methods\nfunction canSubmitForm(validationPassed, input) {\n  try {\n    if(!isSubmitButton(input)) {\n      return;\n    }\n\n    const submitBtn = input;\n\n    if(validationPassed) {\n      submitBtn.removeAttribute(\"disabled\");\n      submitBtn.classList.remove(APP_CLASSNAME);\n      submitBtn.classList.remove(DISABLED_FIELD_CLASSNAME);\n    } else {\n      submitBtn.setAttribute(\"disabled\", true);\n      submitBtn.classList.add(APP_CLASSNAME);\n      submitBtn.classList.add(DISABLED_FIELD_CLASSNAME);\n    }\n  } catch(e) {\n    console.log(\"Unable to modify the submit button state: \", e.message);\n  }\n}\n","module.exports = {\n  addBottomBorder: require(\"./add-bottom-border\"),\n  addValidationStatusIcons: require(\"./add-validation-status-icons\"),\n  toggleSubmitButton: require(\"./toggle-submit-button\"),\n};","const { is, object } = require(\"../helpers\");\n\nconst regexRules = [\"g\", \"m\"];\n\nmodule.exports = {\n  createAlphanumericRegexObject,\n  getLengthRegex,\n  getRegexRules,\n};\n\nfunction createAlphanumericRegexObject(regexStr, rule, emptyLengthCharacter) {\n  let lenRegex;\n  \n  if(rule.length) {\n    lenRegex = getLengthRegex(rule.length);\n  } else {\n    lenRegex = emptyLengthCharacter || \"+\";\n  }\n  \n  regexStr = `${regexStr}${lenRegex}`;\n  regexStr = `^${regexStr}$`;\n  \n  return new RegExp(regexStr, getRegexRules(rule.matchCase));\n}\n  \nfunction getLengthRegex(lengthRule) {\n  let regexStr;\n  const len = object.clone(lengthRule) || {};\n  \n  if(len.min && len.max) {\n    if(Number(len.min) > Number(len.max)) {\n      const tmp = len.min;\n  \n      len.min = len.max;\n      len.max = tmp;\n    }\n  \n    regexStr = `{${len.min},${len.max}}`;\n  } else if(len.min) {\n    regexStr = `{${len.min},}`;\n  } else if(len.max) {\n    regexStr = `{0,${len.max}}`;\n  } else if(is.number(len)) {\n    regexStr = `{0,${len}}`;\n  }\n  \n  return regexStr;\n}\n  \nfunction getRegexRules(matchCase) {\n  if(matchCase) {\n    return regexRules.join(\"\");\n  } else {\n    return [...regexRules, \"i\"].join(\"\");\n  }\n}","const { createAlphanumericRegexObject } = require(\"./validator-helpers\");\n\n/**\n* Validate that a string contains only alphanumeric characters, _ (underscore), or - (hyphen). \n* @param {String} value (required): The string to validate\n* @param {Object} rule (required): Object containing the requirements for the value to be valid.\n* @param {String} [rule.type]: the expected type of the value.\n* @param {Boolean} [rule.allowWhitespace] (optional): specifies whether to allow whitespace or not.\n* @param {Boolean} [rule.matchCase]: true for case-sensitive validation, false for case-insensitive validation.\n* @returns {Boolean}\n*/\nmodule.exports = function alphanumericValidator(value, rule) {\n  if(!rule.type || rule.type !== \"alnum\") {\n    return true; // if the \"alnum\" rule has not been defined for this value, bypass this validator\n  }\n\n  if(!value) {\n    return false;\n  }\n\n  const regexStr = rule.allowWhitespace ? \"[A-Z0-9\\\\s_-]\" : \"[A-Z0-9_-]\";\n  const regex = createAlphanumericRegexObject(regexStr, rule);\n\n  return regex.test(value);\n};","const { createAlphanumericRegexObject } = require(\"./validator-helpers\");\n\n/**\n * Validate that a string contains only the characters A - Z, _ (underscore), or - (hyphen). \n * @param {String} value (required): The string to validate\n * @param {Object} rule (required): Object containing the requirements for the value to be valid.\n * @param {String} [rule.type]: the expected type of the value.\n * @param {Boolean} [rule.allowWhitespace] (optional): specifies whether to allow whitespace or not.\n * @param {Boolean} [rule.matchCase]: true for case-sensitive validation, false for case-insensitive validation.\n * @returns {Boolean}\n */\nmodule.exports = function alphaValidator(value, rule) {\n  if(!rule.type || rule.type !== \"alpha\") {\n    return true; // if the \"alpha\" rule has not been defined for this value, bypass this validator\n  }\n\n  if(!value || typeof value !== \"string\") {\n    return false;\n  }\n  \n  const regexStr = rule.allowWhitespace ? \"[A-Z\\\\s_-]\" : \"[A-Z_-]\";\n  const regex = createAlphanumericRegexObject(regexStr, rule);\n  \n  return regex.test(value);\n};","const { createAlphanumericRegexObject } = require(\"./validator-helpers\");\n\n/**\n * Validate that a string contains only ascii text characters. \n * @param {String} value (required): The string to validate\n * @param {Object} rule (required): Object containing the requirements for the value to be valid.\n * @param {String} [rule.type]: the expected type of the value.\n * @param {Boolean} [rule.matchCase]: true for case-sensitive validation, false for case-insensitive validation.\n * @returns {Boolean}\n */\nmodule.exports = function asciiTextValidator(value, rule) {\n  if(!rule.type || rule.type !== \"ascii\") {\n    return true; // if the \"ascii\" rule has not been defined for this value, bypass this validator\n  }\n\n  if(!value) {\n    return false;\n  }\n  \n  const regexStr = \"[A-Z0-9`~!@#$%^&*()-+=\\\\[\\\\]{}\\\\\\\\;:'\\\"|<>?\\\\,\\\\.?\\\\/\\\\s_-]\"; // \\\\\\\\ = support for backward slash\n  const regex = createAlphanumericRegexObject(regexStr, rule);\n  \n  return regex.test(value);\n};","// Credits: https://github.com/manishsaraan/email-validator/blob/master/index.js\n//\n// Thanks to:\n// http://fightingforalostcause.net/misc/2006/compare-email-regex.php\n// http://thedailywtf.com/Articles/Validating_Email_Addresses.aspx\n// http://stackoverflow.com/questions/201323/what-is-the-best-regular-expression-for-validating-email-addresses/201378#201378\n// https://en.wikipedia.org/wiki/Email_address  The format of an email address is local-part@domain, where the \n// local part may be up to 64 octets long and the domain may have a maximum of 255 octets.[4]\n//\n\nconst regex = /^[-!#$%&'*+/0-9=?A-Z^_a-z`{|}~](\\.?[-!#$%&'*+/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\\.?[a-zA-Z0-9])*\\.[a-zA-Z](-?[a-zA-Z0-9])+$/;\n\n/**\n * Validate that a string is an email.\n * @param {String} value (required): The value to validate\n * @param {Object} rule (required): Object containing the requirements for the value to be valid.\n * @param {String} [rule.type]: the expected type of the value.\n * @returns {Boolean}\n */\nmodule.exports = function emailValidator(value, rule) {\n  if(!rule.type || rule.type !== \"email\") {\n    return true; // if the \"email\" rule has not been defined for this value, bypass this validator\n  }\n\n  if(!value || typeof value !== \"string\") {\n    return false;\n  }\n  \n  const emailParts = value.split(\"@\");\n  \n  if(emailParts.length !== 2) {\n    return false;\n  }\n  \n  const [account, address] = emailParts;\n  \n  if(account.length > 64 || address.length > 255) {\n    return false;\n  }\n  \n  const domainParts = address.split(\".\");\n    \n  if(domainParts.some(part => part.length > 63)) {\n    return false;\n  }\n  \n  return regex.test(value);\n};","const { is } = require(\"../helpers\");\nconst { createAlphanumericRegexObject } = require(\"./validator-helpers\");\n\n/**\n * Validate that a string conforms to the passed length requirements.\n * @param {String} value (required): The value to validate\n * @param {Object} rule (required): Object containing the requirements for the value to be valid.\n * @param {Number|Object} [rule.length] (required): The length requirements.\n * @param {Number} [rule.length.min] (optional): minimum length requirement.\n * @param {Number} [rule.length.max] (optional): maximum length requirement.\n * @returns {Boolean}\n */\nmodule.exports = function lengthValidator(value, rule) {\n  if(!(is.number(rule.length)) && !(is.object(rule.length))) {\n    return true; // If the length rule has not been defined for the value, bypass this validator\n  }\n\n  if(typeof value === \"undefined\" || value === null || value === false) {\n    return false;\n  }\n  \n  const regexStr = \"[A-Z0-9.\\\\s_-]\";\n  const regex = createAlphanumericRegexObject(regexStr, rule, \"*\");\n  \n  return regex.test(value);\n};","const { createAlphanumericRegexObject } = require(\"./validator-helpers\");\n\n/**\n * Validate that a value contains only numbers. \n * @param {Number|String} value (required): The string to validate\n * @param {Object} rule (required): Object containing the requirements for the value to be valid.\n * @param {String} [rule.type]: The expected type of the value.\n * @param {Boolean} [rule.allowWhitespace] (optional): specifies whether to allow whitespace or not.\n * @returns {Boolean}\n */\nmodule.exports = function numberValidator(value, rule) {\n  if(!rule.type || rule.type !== \"number\") {\n    return true; // If the \"number\" rule has not been specified for this value, bypass this validator.\n  }\n\n  if(value === \"\" || value === null || typeof value === \"undefined\") {\n    return false;\n  }\n  \n  const regexStr = rule.allowWhitespace ? \"[0-9\\\\s]\" : \"[0-9]\";\n  const regex = createAlphanumericRegexObject(regexStr, rule);\n  \n  return regex.test(value);\n};","const { is } = require(\"../helpers\");\n\n\n/**\n * Validate a value according to provided custom regular expression.\n * @param {Mixed} value (required): The value to validate\n * @param {Object} rule (required): Object containing the requirements for the value to be valid.\n * @param {Object|String} [rule.regex]: A regex string or a regex object.\n * @returns {Boolean}\n */\nmodule.exports = function regexValidator(value, rule) {\n  if(!rule.regex) {\n    return true; // if the regex rule has not been defined for this value, bypass this validator\n  }\n\n  const { regex: regexStr } = rule;\n  const regex = is.object(regexStr) ? regexStr : new RegExp(regexStr);\n  \n  return regex.test(value);\n};","/**\n * Validate that a value is not empty, that is, not undefined. \n * @param {String} value (required): The value to validate\n * @param {Object} rule (required): Object containing the requirements for the value to be valid.\n * @param {Boolean} [rule.required]: Dictates whether or not the value is required.\n * @param {Boolean} prevResult (optional);\n * @param {Object} extras\n * @param {Boolean} [extras.checked] (optional): if the value is of a checkbox, .\n * @returns {Boolean}\n */\nmodule.exports = function requiredFieldValidator(value, rule, _, extras) {\n  if(!rule.required) {\n    return true; // bypass this validation if no rule has been specified for it.\n  }\n\n  if(value === \"\" || typeof value === \"undefined\") {\n    return false;\n  }\n  \n  let passed;\n  \n  switch(rule.type) {\n  case \"checkbox\" : passed = extras.checked && value === \"on\"; break;\n  default         : passed = value.length > 0; break;\n  }\n  \n  return passed;\n};","module.exports = {\n  alphanumericValidator: require(\"./alphanumeric-validator\"),\n  alphaValidator: require(\"./alpha-validator\"),\n  asciiTextValidator: require(\"./ascii-text-validator\"),\n  emailValidator: require(\"./email-validator\"),\n  lengthValidator: require(\"./length-validator\"),\n  numberValidator: require(\"./number-validator\"),\n  regexValidator: require(\"./regex-validator\"),\n  requiredFieldValidator: require(\"./required-field-validator\"),\n};\n","\"use strict\";\n\nconst effects = require(\"./effects\");\nconst errorMessages = require(\"./error-messages\");\nconst { \n  APP_CLASSNAME,  \n  SMART_FIELD_CLASSNAME,\n  is,\n  object,\n  generateEffectName,\n  getEffectNames,\n  getValidatorNames,\n  preEffectRegistrationCheck,\n  preValidatorRegistrationCheck,\n  isSubmitBtn,\n  normalizeId,\n  validateId,\n} = require(\"./helpers\");\nconst defaultValidators = require(\"./validators\");\n\nconst defaultEffects = Object.values(effects);\nconst defaultEffectNames = getEffectNames(effects);\nconst defaultValidatorFunctions = Object.entries(defaultValidators);\nconst defaultValidatorKeys = getValidatorNames(defaultValidators); //Object.keys(defaultValidators);\n\n\nmodule.exports = SmartField;\n\n\n/**\n * Create a new SmartField object.\n * @param {Object} element: the element to create a SmartField instance from;\n * @param {String} [element.id] (required): the id of the element \n * @param {String} [element.role] (optional): the role of the element. \n *    This can be particularly usefule for identifying submit buttons that are not defined \n *    as `<input type=\"submit\" />`. In such cases, if we want effects that work with submit buttons \n *    to have access to the button, we have to give the element a role of \"submit-button\", e.g. \n *    `<button role=\"submit-button\">Submit</button>`.\n * @param {Function} [element.getValue] (optional): A function to get the element's value.\n *    The function should return the element's value when called.\n *    If the element is an HTML element such as `input`, `select`, `checkbox`, or a contenteditable field, \n *    this property is optional, and the element's value can be retrieved automatically. \n *    For other types of elements, this value is required for getting the element's value during validation.\n * @param {Object} rule (optional): object specifying the validation rules to apply to this instance.\n * @param {Boolean} [rule.required]: specifies whether the field is required (true) or not (false)\n * @param {Number|Object} [rule.length]: specifies the accepted input length. \n *    If the value is a number, it specifies the maximum length.\n *    If the value is an object, it specifies. the minimum and/or maximum length.\n * @param {Number} [rule.length.min]: specifies the mininum accepted input length\n * @param {Number} [rule.length.max]: specifies the maximum accepted input length\n * @param {Boolean} [rule.matchCase]: performs a case-sensitive (true) or case-insensitive (false) validation.\n * @param {String} [rule.type]: the acceptable data type of the value  for this field (alnum|alpha|ascii|email|number).\n *    Default is alnum.\n * @param {String} [rule.regex]: specifies a custom validation regex.\n * \n * @returns this\n * \n * Before the field can have any validation performed on it, a rule must be added to it\n * either durinc initialization or by calling the addRule(rule) method on the instance.\n */\nfunction SmartField(element, rule) {\n  if(!is.object(element)) {\n    throw new TypeError(\n      errorMessages.functionParamExpectsType\n        .replace(\":param:\", \"element\")\n        .replace(\":type:\", \"object\")\n    );\n  }\n\n  if(!validateId(element.id) && !isSubmitBtn(element)) {\n    throw new TypeError(\n      errorMessages\n        .objectPropertyShouldHaveType\n        .replace(\":prop:\", \"id\")\n        .replace(\":object:\", \"element\")\n        .replace(\":type:\", \"a string or a number\")\n    );\n  }\n\n  if(normalizeId(element.id).length === 0 && !isSubmitBtn(element)) {\n    throw new TypeError(\n      errorMessages\n        .objectPropertyCannotBeEmpty\n        .replace(\":prop:\", \"id\")\n        .replace(\":object:\", \"element\")\n    );\n  }\n\n  if(typeof element.getValue !== \"undefined\" && typeof element.getValue !== \"function\") {\n    throw new TypeError(\n      errorMessages\n        .objectPropertyShouldHaveType\n        .replace(\":prop:\", \"getValue\")\n        .replace(\":object:\", \"element\")\n        .replace(\":type:\", \"a function\")\n    );\n  }\n\n  if(isSubmitBtn(element)) {\n    this.role = \"submit-button\";\n  }\n\n  this.id = element.id;\n  this.element = element;\n  this.defaultEffects = new Map();\n  this.defaultValidators = new Map(defaultValidatorFunctions);\n  this.effects = new Map();\n  this.validators = new Map();\n\n  for(const effect of defaultEffects) {\n    const { name, meta, init, valid, invalid } = effect;\n\n    this.defaultEffects.set(name, { meta, init, valid, invalid });\n\n    if(is.function(init)) {\n      init(this.element);\n    }\n  }\n\n  if(is.object(rule)) {\n    this.addRule({ ...rule, fieldId: element.id });\n  }\n\n  claimField(element);\n}\n\n/**\n * Add a new rule to a SmartField instance or update the existing rule for the instance.\n * @param {Object} rule: Object containing the requirements for the field's value to be valid.\n * @param {Boolean} [rule.required]: (for checkbox, dropdown, and text fields): determines if the field is required.\n * @param {Number|Object} [rule.length]: specify the accepted input length. \n *    If the value is a number, it specifies the maximum length.\n *    If the value is an object, it specifies the minimum and/or maximum length.\n * @param {Number} [rule.length.min]: specifies the mininum accepted input length\n * @param {Number} [rule.length.max]: specifies the maximum accepted input length\n * @param {Boolean} [rule.allowWhitespace]: specifies if white-space characters are allowed.\n * @param {Boolean} [rule.matchCase]: performs a case-sensitive (true) or case-insensitive(false) validation.\n * @param {String} [rule.type]: the input field's expected data type (alnum|alpha|ascii|email|number|text).\n *    Default is alnum.\n * @param {String} [rule.regex]: specifies a custom validation regex\n * @param {Boolean} replace (optional): replace the existing rule completely with the new rule.\n *    This will not only overwrite a specific key, but replace the entire previous `rule` object.\n * \n * @returns this\n * \n */\nSmartField.prototype.addRule = function addRule(rule) {\n  const existingRule = this.rule;\n  \n  if(is.object(existingRule) && is.object(rule)) {\n    this.rule = object.cloneAndExtend(existingRule, rule);\n  } else {\n    this.rule = rule;\n  }\n  \n  return this;\n};\n\n/**\n * Delete the rule for this instance.\n * @param {String} key (optional): If specified, delete only the specified rule.\n * Otherwise, delete the entire rule object for this instance.\n * \n * @returns this\n */\nSmartField.prototype.removeRule = function removeRule(key) {\n  const existingRule = this.rule;\n\n  if(!is.object(existingRule)) {\n    return this;\n  }\n  \n  if(key) {\n    delete this.rule[key];\n  } else {\n    delete this.rule;\n  }\n\n  return this;\n};\n\n/**\n * Get the rule object associated with this field\n * @param {String} key (optional): get specific rule by key.\n * @return {Boolean|Object|String|Undefined}\n */\nSmartField.prototype.getRule = function getRule(key) {\n  if(key && this.rule) {\n    return typeof this.rule[key] !== \"undefined\" ? this.rule[key] : null;\n  } else {\n    return this.rule || null;\n  }\n};\n\n/**\n * getEffect:  retrieves an effect attached to this field by name.\n * \n * @param {String} name (required)\n * @param {String} namespace (optional)\n * @returns {Boolean}\n */\nSmartField.prototype.getEffect = function getEffect(name, namespace) {\n  name = is.string(name) ? name.trim().toLowerCase() : \"\";\n  namespace = is.string(namespace) ? namespace.trim().toLowerCase() : \"\";\n\n  const effectName = generateEffectName(name, namespace);\n\n  if(this.effects.has(effectName)) {\n    return this.effects.get(effectName);\n  } else {\n    return null;\n  }\n};\n\n/**\n * @param {String} type (optional): \"addon\"|\"default\".\n * @returns {Object} with members: `default` and/or `addon`.\n */\nSmartField.prototype.getEffects = function getActiveEffects(type) {\n  type = is.string(type) ? type.toLowerCase().trim() : \"\";\n\n  const effects = {\n    default: this.defaultEffects,\n    addon: this.effects,\n  };\n\n  if([\"addon\", \"default\"].includes(type)) {\n    return effects[type];\n  } else {\n    return effects;\n  }\n};\n\n/**\n * \n * @param {Object} effect: \n * @param {String} [effect.name] (required): The name of this effect, used when registering the effect.\n * @param {Function} [effects.init] (optional): Function that performs any initialization function.\n *    The function is invoked right after the effect is registered.\n *    It receives the current input field as its first argument.\n * @param {Function} [effect.valid] (required): Function to invoke post-validation if the field is valid.\n *    The function receives the validated input field as its first argument.\n * @param {Function} [effect.invalid] (required): Function to invoke post-validation if the field is invalid.\n *    The function is passed the validated input field as its first argument\n * @param {Object} [effect.meta] (optional): Effect meta data, e.g., namespace, author, version, etc.\n * @param {String} [effect.meta.namespace]: used in conjunction with the effect `name` \n *    to create a unique name for the effect.\n * @returns this.\n */\nSmartField.prototype.useEffect = function useEffect(effect) {\n  const parsedEffect = preEffectRegistrationCheck(effect, defaultEffectNames);\n\n  let { name: effectName, meta, init, valid, invalid } = parsedEffect;\n\n  if(this.usesEffect(effectName)) {\n    throw new TypeError(\n      errorMessages.objectWithKeyExists\n        .replace(\":object:\", \"An effect\")\n        .replace(\":key:\", effectName)\n    );\n  }\n\n  this.effects.set(effectName, { meta, init, valid, invalid });\n\n  if(is.function(init)) {\n    init(this.getElement());\n  }\n\n  return this;\n};\n\n/**\n * usesEffect: checks whether the field has any effects attached to.\n * If the `name` (and/or `namespace`) parameter is supplied, \n * checks if the field has the named effect attached.\n * \n * @param {String} name (optional)\n * @param {String} namespace (optional)\n * @returns {Boolean}\n */\nSmartField.prototype.usesEffect = function usesEffect(name, namespace) {\n  if(is.string(name)) {\n    name = name.trim().toLowerCase();\n    namespace = is.string(namespace) ? namespace.trim().toLowerCase() : \"\";\n\n    const effectName = generateEffectName(name, namespace);\n\n    return this.effects.has(effectName);\n  } else {\n    return this.effects.size > 0;\n  }\n};\n\n/**\n * Add a validator to the list of validators for this field.\n * \n * @param {String} validatorKey (required): The identifier for the validator.\n * @param {Function} validatorFn (required): A function that validates the field.\n *    The function is passed the following arguments in order: \n *       - `value`: the value entered by the user for this field\n *       - `rule`: the rule defined for this field instance\n *       - `prevResult`: a Boolean value indicating the result of previous validators.\n *       - `extras`: object containing any other field-specific information, \n *             like the \"checked\" state for checkboxes, etc.\n *    The function should return Boolean true or false to indicate if the validation passed.\n * @param {Object} validatorMeta (optional): Object containing validator metadata (namespace, author, etc.)\n * @param {String} [validatorMeta.namespace]: namespace of the validator. \n *    This is appended to the key to prevent naming conflicts.\n * @returns this.\n */\nSmartField.prototype.addValidator = function addValidator(validatorKey, validatorFn, validatorMeta) {\n  validatorKey = preValidatorRegistrationCheck(validatorKey, validatorFn, validatorMeta, defaultValidatorKeys);\n\n  if(this.hasValidator(validatorKey)) {\n    throw new TypeError(\n      errorMessages.objectWithKeyExists\n        .replace(\":object:\", \"A validator\")\n        .replace(\":key:\", validatorKey)\n    );\n  }\n\n  this.validators.set(validatorKey, validatorFn);\n\n  return this;\n};\n\n/**\n * @param {String} type (optional): \"addon\"|\"default\".\n * @returns {Object} with members: `default` and/or `addon`.\n */\nSmartField.prototype.getValidators = function getValidators(type) {\n  type = is.string(type) ? type.toLowerCase().trim() : \"\";\n\n  const validators = {\n    default: this.defaultValidators,\n    addon: this.validators,\n  };\n\n  if([\"addon\", \"default\"].includes(type)) {\n    return validators[type];\n  } else {\n    return validators;\n  }\n};\n\nSmartField.prototype.hasValidator = function hasValidator(validatorKey) {\n  if(is.string(validatorKey)) {\n    validatorKey = validatorKey.trim().toLowerCase();\n  }\n\n  return (\n    is.string(validatorKey)\n      ? this.validators.has(validatorKey) \n      : this.validators.size > 0\n  );\n};\n\n/**\n * Get the original input field passed to the constructor\n * @returns \n */\nSmartField.prototype.getElement = function getElement() { \n  return this.element;\n};\n\n/**\n * Get the value entered by the user for this field\n * @returns {String|Mixed}\n */\nSmartField.prototype.getValue = function getValue() {\n  let value;\n  let input = this.getElement();\n\n  if(typeof input.getValue === \"function\") {\n    value = input.getValue();\n  } else if(input.type?.toLowerCase() === \"checkbox\") {\n    value = input.value;\n  } else if(input.tagName?.toLowerCase() === \"select\") {\n    value = getHtmlSelectElementSelectedOption(input)?.value?.trim();\n  } else if(typeof input.value !== \"undefined\") {\n    value = input.value;\n  } else if(input.isContentEditable && typeof input.textContent !== \"undefined\") {\n    value = input.textContent;\n  }\n\n  return ( is.string(value) ? value.trim() : value );\n};\n\n/**\n * @returns {Boolean}\n */\nSmartField.prototype.validate = function validate() {\n  const { default: defaultValidators, addon: addonValidators } = this.getValidators();\n  const validators = Array.from(defaultValidators.values()).concat(Array.from(addonValidators.values()));\n\n  if(validators.length === 0) {\n    throw new TypeError(errorMessages.noValidatorsActive);\n  }\n\n  const { default: defaultEffects, addon: addonEffects } = this.getEffects();\n  const effects = Array.from(defaultEffects.values()).concat(Array.from(addonEffects.values()));\n\n  if(effects.length === 0) {\n    throw new TypeError(errorMessages.noEffectsActive);\n  }\n\n  let rule = this.getRule();\n  const input = this.getElement();\n  const value = this.getValue();\n  const extras = {};\n\n  if(rule.required && input.type === \"checkbox\") {\n    extras.checked = input.checked;\n  }\n\n  const validationPassed = validators.reduce((passed, fn) => passed && fn(value, rule, passed, extras), true);\n\n  effects.forEach(({ valid, invalid }) => {\n    if(validationPassed) {\n      valid(input);\n    } else {\n      invalid(input);\n    }\n  });\n\n  return validationPassed;\n};\n\n/**\n * Start Listening for \"input\" events and perform validation\n * @param {Function} callback: A function to invoke on validation complete.\n *   The function will be passed the input field and the result (Boolean) of the validation.\n */\nSmartField.prototype.watch = function watch(callback) {\n  const input = this.getElement();\n  let targetEvent;\n  \n  switch(input.type) {\n  case \"checkbox\" : targetEvent = \"click\"; break;\n  case \"email\"    :\n  case \"password\" : \n  case \"text\"     : \n  default         : targetEvent = \"input\"; break;\n  }\n  \n  input.addEventListener(targetEvent, () => this.validate(_, callback)); // eslint-disable-line\r\n};\n\n\n// Helpers\n\nfunction getHtmlSelectElementSelectedOption(selectElement) {\n  return {\n    value : selectElement.value,\n    text  : selectElement.options[selectElement.selectedIndex].text,\n  };\n}\n\nfunction claimField(input) {\n  input.classList?.add(APP_CLASSNAME);\n  input.classList?.add(SMART_FIELD_CLASSNAME);\n}","const errorMessages = require(\"../error-messages\");\nconst { is, isSubmitBtn, normalizeId, validateId } = require(\"../helpers\");\nconst SmartField = require(\"../smart-field\");\n\n/**\n * Add a new field for validation\n * @param {Object|String} input: the field to validate. The field must have an `id` property.\n *    This can be the HTML element itself if we already have it, or its ID.\n * @param {String} [input.id] (required): the id of the element \n * @param {String} [input.role] (optional): the role of the element. \n *    This can be particularly useful for identifying submit buttons that are not defined \n *    as `<input type=\"submit\" />`. In such cases, if we want effects that work with submit buttons \n *    to have access to the button, we have to give the element a role of \"submit-button\", e.g. \n *    `<button role=\"submit-button\">Submit</button>`.\n * @param {Object} rule (optional): object containing validation rules for this field.\n * @param {Boolean} [rule.required]: specifies whether the field is required (true) or not (false)\n * @param {Number|Object} [rule.length]: specifies the accepted input length. \n *   If the value is a number, it specifies the maximum length. \n *   If the value is an object, it specifies the minimum and/or maximum length.\n * @param {Number} [rule.length.min]: specifies the mininum accepted input length\n * @param {Number} [rule.length.max]: specifies the maximum accepted input length\n * @param {Boolean} [rule.matchCase]: performs case-sensitive (true) or case-insensitive (false) validation.\n * @param {String} [rule.type]: the field's expected data type (alnum|alpha|email|number|text).\n *    Default is alnum.\n * @param {String} [rule.regex]: specifies a custom validation regex\n * @returns this\n */\nmodule.exports = function addField(input, rule) {\n  if(typeof input === \"string\") {\n    input = document.getElementById(input);\n  }\n\n  if(!is.object(input)) {\n    throw new TypeError(\n      errorMessages.functionParamExpectsType\n        .replace(\":param:\", \"input\")\n        .replace(\":type:\", \"object\")\n    );\n  }\n  \n  if(!validateId(input.id) && !isSubmitBtn(input)) {\n    throw new TypeError(\n      errorMessages.objectPropertyShouldHaveType\n        .replace(\":prop:\", \"id\")\n        .replace(\":object:\", \"input\")\n        .replace(\":type:\", \"a string or a number\")\n    );\n  }\n  \n  const field = this.getField(normalizeId(input.id));\n  \n  if(field) {\n    if(is.object(rule)) {\n      rule.field = input.id;\n  \n      this.addRule(rule);\n    }\n  } else {\n    this.fields.push(new SmartField(input, rule));\n  }\n    \n  return this;\n};","const { is } = require(\"../helpers\");\n\n/**\n * Add an array of new fields for validation.\n * @param {Array} fields: the fields to validate. \n * @param {Object} [fields[i].field]: An object holding the input field to validate, must have an `id` property.\n * @param {String} [fields[i].field.id]: The id of the input field\n * @param {Object} [fields[i].rule]: (optional): object containing validation rules for this field.\n * @param {Boolean} [fields[i].rule.required]: specifies whether the field is required (true) or not (false)\n * @param {Number|Object} [fields[i].rule.length]: specifies the accepted input length. \n *   If the value is a number, it specifies the maximum length. \n *   If the value is an object, it specifies the minimum and/or maximum length.\n * @param {Number} [fields[i].rule.length.min]: specifies the mininum accepted input length\n * @param {Number} [fields[i].rule.length.max]: specifies the maximum accepted input length\n * @param {Booleean} [fields[i].rule.allowWhitespace]\n * @param {Boolean} [fields[i].rule.matchCase]: performs case-sensitive (true) or case-insensitive (false) validation.\n * @param {String} [fields[i].rule.type]: the field's expected data type (alnum|alpha|email|number|text).\n *    Default is alnum.\n * @param {String} [fields[i].rule.regex]: specifies a custom validation regex\n * @returns this\n * \n * Only fields that have rules added to them will be considered for validation.\n */\nmodule.exports = function addFields(fields) {\n  if(is.array(fields) && fields.length > 0) {\n    fields.forEach(field => this.addField(field.field, field.rule));\n  }\n\n  return this;\n};","const errorMessages = require(\"../error-messages\");\nconst { is, object } = require(\"../helpers\");\n\n\n/**\n * Add a validation rule to a previuosly created field.\n * @param {Object} rule: object\n * @param {Object|String} [rule.field]: the field to apply the rule to. This can be the element itself or its id.\n * @param {Boolean} [rule.required]: specifies whether the field is required (true) or not (false)\n * @param {Number|Object} [rule.length]: specifies the accepted input length. \n *    If the value is a number, it specifies the maximum length.\n *    If the value is an object, it specifies the minimum and/or maximum accepted length.\n * @param {Number} [rule.length.min]: specify the mininum accepted input length\n * @param {Number} [rule.length.max]: specify the maximum accepted input length\n * @param {Boolean} [rule.allowWhitespace]: specifies if white-space characters are allowed.\n * @param {Boolean} [rule.matchCase]: performs a case-sensitive (true) or case-insensitive (false) validation\n * @param {String} [rule.type]: the input field's expected data type (alnum|alpha|email|number|text).\n *    Default is alnum.\n * @param {String} [rule.regex]: specifies a custom validation regex\n * @returns this\n */\nmodule.exports = function addRule(rule) {\n  if(!is.object(rule)) {\n    throw new TypeError(\n      errorMessages.functionParamExpectsType\n        .replace(\":param:\", \"rule\")\n        .replace(\":type:\", \"object\")\n    );\n  }\n  \n  if(!object.has(rule, \"field\")) {\n    throw new TypeError(\n      errorMessages.objectMustHaveProperty\n        .replace(\":param:\", \"rule\")\n        .replace(\":prop:\", \"field\")\n    );\n  }\n  \n  const fieldId = is.object(rule.field) ? rule.field.id : rule.field;\n  const field = this.getField(fieldId);\n  \n  if(!field) {\n    throw new TypeError(\n      errorMessages.fieldNotRegistered\n        .replace(\":element:\", \"validator\")\n        .replace(\":id:\", fieldId)\n    );\n  }\n  \n  field.addRule(rule);\n  \n  return this;\n};\n  ","const errorMessages = require(\"../error-messages\");\nconst { getValidatorNames, preValidatorRegistrationCheck } = require(\"../helpers\");\nconst defaultValidators = require(\"../validators\");\n\nconst defaultValidatorKeys = getValidatorNames(defaultValidators); //Object.keys(defaultValidators);\n\n\nmodule.exports = function addValidator(validatorKey, validatorFn, validatorMeta) {\n  this.validators = this.validators || {};\n  \n  validatorKey = preValidatorRegistrationCheck(validatorKey, validatorFn, validatorMeta, defaultValidatorKeys);\n  \n  if(this.validators[validatorKey]) {\n    throw new TypeError(\n      errorMessages.objectWithKeyExists\n        .replace(\":object:\", \"A validator\")\n        .replace(\":key:\", validatorKey)\n    );\n  }\n  \n  this.validators[validatorKey] = validatorFn;\n  \n  // Add the effect to the elements attached to the instance.\n  if(typeof this.getFields === \"function\") {\n    this.getFields().forEach(field => {\n      if(!(field.hasValidator(validatorKey))) {\n        field.addValidator(validatorKey, validatorFn, validatorMeta);\n      }\n    });\n  }\n};\n","const effects = require(\"../effects\");\nconst { is } = require(\"../helpers\");\n\nconst defaultEffects = {};\n\nfor(const effect of Object.values(effects)) {\n  const { name, meta, init, valid, invalid } = effect;\n\n  defaultEffects[name] = { meta, init, valid, invalid };\n}\n\n/**\n * @param {String} type (optional): \"addon\"|\"default\".\n * @returns {Object} with members: `default` and/or `addon`.\n */\nmodule.exports = function getEffects(type) {\n  type = is.string(type) ? type.trim().toLowerCase() : \"\";\n\n  const addonEffects = this.effects || null;\n\n  if([\"addon\", \"default\"].includes(type)) {\n    switch(type) {\n    case \"default\": return defaultEffects;\n    case \"addon\"  : return addonEffects;\n    }\n  } else {\n    return {\n      default: defaultEffects,\n      addon: addonEffects,\n    };\n  }\n};\n","const { normalizeId } = require(\"../helpers\");\n\n\nmodule.exports = function getField(fieldId) {\n  return this.getFields().find(field => normalizeId(field.id) === normalizeId(fieldId)) || null;\n};","/**\n * Get all fields\n * @returns {Array}\n */\nmodule.exports = function getFields() {\n  return this.fields;\n};","const validators = require(\"../validators\");\nconst { is } = require(\"../helpers\");\n\nconst defaultValidators = {};\n\nfor(const [key, validator] of Object.entries(validators)) {\n  defaultValidators[key] = validator;\n}\n\n/**\n * @param {String} type (optional): \"addon\"|\"default\".\n * @returns {Object} with members: `default` and/or `addon`.\n */\nmodule.exports = function getValidator(type) {\n  type = is.string(type) ? type.trim().toLowerCase() : \"\";\n\n  const addonValidators = this.validators || null;\n\n  if([\"addon\", \"default\"].includes(type)) {\n    switch(type) {\n    case \"default\": return defaultValidators;\n    case \"addon\"  : return addonValidators;\n    }\n  } else {\n    return {\n      default: defaultValidators,\n      addon: addonValidators,\n    };\n  }\n};\n","const { is } = require(\"../helpers\");\n\n\n/**\n * \n * @param {Number|String} element: the field whose rule we want to delete. This can be the underlying element or its id.\n * @param {String} key (optional): the key of the rule we want to delete. \n *    If not specified, the entire rule for the field is deleted.\n *    This means no more validation will take place for that field.\n * @returns this\n */\nmodule.exports = function removeRule(element, key) {\n  const fieldId = is.object(element) ? element.id : element;\n  const field = this.getField(fieldId);\n  \n  if(field) {\n    field.removeRule(key);\n  }\n  \n  return this;\n};","/**\n * Support JSON.stringify\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify\n */\nmodule.exports = function toJSON() {\n  return this.getFields();\n};","const effects = require(\"../effects\");\nconst errorMessages = require(\"../error-messages\");\nconst { getEffectNames, preEffectRegistrationCheck } = require(\"../helpers\");\n\nconst defaultEffectNames = getEffectNames(effects);\n\n/**\n * @param {Object} effect: \n * @param {String} [effect.name] (required): The name of this effect, used when registering the effect.\n * @param {Function} [effects.init] (optional): Function that performs any initialization function.\n *    The function is invoked right after the effect is registered.\n *    It receives the current input field as its first argument.\n * @param {Function} [effect.valid] (required): Function to invoke post-validation if the field is valid.\n *    The function receives the validated input field as its first argument.\n * @param {Function} [effect.invalid] (required): Function to invoke post-validation if the field is invalid.\n *    The function is passed the validated input field as its first argument\n * @param {Object} [effect.meta] (optional): Effect meta data, e.g., namespace, author, version, etc.\n * @param {String} [effect.meta.namespace]: used in conjunction with the effect `name` \n *    to create a unique name for the effect.\n * @returns this.\n */\nmodule.exports = function useEffect(effect) {\n  this.effects = this.effects || {};\n\n  const parsedEffect = preEffectRegistrationCheck(effect, defaultEffectNames);\n\n  let { name: effectName, meta, init, valid, invalid } = parsedEffect;\n\n  if(this.effects[effectName]) {\n    throw new TypeError(\n      errorMessages.objectWithKeyExists\n        .replace(\":object:\", \"An effect\")\n        .replace(\":key:\", effectName)\n    );\n  }\n\n  this.effects[effectName] = { meta, init, valid, invalid };\n\n  // Add the effect to the elements attached to the instance.\n  if(typeof this.getFields === \"function\") {\n    this.getFields().forEach(field => {\n      if(!(field.usesEffect(effect.name, effect.meta?.namespace))) {\n        field.useEffect(effect);\n      }\n    });\n  }\n};","/**\n * @returns {Boolean}: the overall result of the entire validation\n */\nmodule.exports = function validate() {\n  const validated = this.getFields().map(field => field.validate());\n  \n  return validated.every(passed => Boolean(passed));\n};","const errorMessages = require(\"../error-messages\");\n\n\n/**\n * Listen for input changes on a form's input members\n * and invoke the handleInputChange for each input element in the form\n * @param {Function} callback: A validation callback, \n *   the function will be invoked for each input field validated and \n *   will receive the input field element as the first argument,\n *   and a boolean indicating the validation result as the second argument.\n *   On completion of validation (when every element has been validated), \n *   the function will be invoked with either \n *      - the form element (if any), or \n *      - the SmartFormValidator instance\n *   and the result of the entire validation, \n *   that is, whether all fields are valid (true) or not (false).\n * @return {Object} with a `valid()` method. The method returns:\n *   true if all fields are valid according to supplied rules, false otherwise.\n */\nmodule.exports = function validateFormFields(callback) {\n  let formValid = false;\n  const form = this.form || this; // when we are using SmartFormValidator instance for isolated elements without an underlying form element.\n  const fields = this.getFields();\n  const inputFields = fields.filter(f => !(isSubmitButton(f)));\n  const submitButton = fields.find(isSubmitButton)?.getElement();\n  const rules = inputFields.map(field => Boolean(field.getRule()));\n\n  const classEffects = this.constructor.getEffects(); // SmartForm and SmartFormValidator are the constructors\n  const instanceEffects = this.getEffects();\n  const effects = Object.assign({}, \n    classEffects.default, classEffects.addon, \n    instanceEffects.default, instanceEffects.addon\n  );\n  const effectFns = Object.values(effects);\n  const validationCallback = getValidationCallback();\n  \n  inputFields.forEach(function observeField(field) {\n    const input = field.getElement();\n  \n    input.addEventListener(getListenerEvent(input), getChangeProcessor(field, input));\n  });\n  \n  return {\n    valid: () => formValid,\n  };\n\n  /**\n   * @param {Object} field: SmartField instance\n   * @param {Object} input: the underlying HTML Element of the SmartField instance \n   * @returns {Function} an event listener function\n   */\n  function getChangeProcessor(field, input) {\n    return function processInputChange() {\n      const valid = field.validate();\n      const validationState = validationCallback(field, valid, rules);\n\n      formValid = validationState.formValid;\n\n      if(typeof callback === \"function\") {\n        callback(input, valid);\n\n        if(validationState.allFieldsValidated) {\n          callback(form, formValid);\n        }\n      }\n\n      applyEffects(formValid, effectFns, submitButton);\n    };\n  }\n};\n\n\n// Helpers\nfunction applyEffects(validationPassed, effects, submitButton) {\n  if(effects.length === 0) {\n    throw new TypeError(errorMessages.noEffectsActive);\n  }\n\n  effects.forEach(({ valid, invalid }) => {\n    if(validationPassed) {\n      valid(submitButton);\n    } else {\n      invalid(submitButton);\n    }\n  });\n}\n\nfunction isSubmitButton(smartField) {\n  return smartField.role === \"submit-button\";\n}\n\n/**\n * Get the event we should listen for on an element.\n * @param {Object} input: HTML (input) element\n * @return {Object} the event to listen for on the element\n */\nfunction getListenerEvent(input) {\n  let targetEvent;\n\n  switch(input.type) {\n  case \"checkbox\" : targetEvent = \"click\"; break;\n  case \"email\"    :\n  case \"password\" : \n  case \"text\"     : \n  default         : targetEvent = \"input\"; break;\n  }\n\n  return targetEvent;\n}\n\n/**\n * @param void \n * @returns function. \n * The returned function takes and returns the following parameters and return value: \n *    @param {Object} field: SmartField instance\n *    @param {Boolean} valid: whether the current field passed validation or not\n *    @param {Array} rules: Array of the all the rules for all the fields being validated, not just for the current field.\n *    @returns {Object}\n */\nfunction getValidationCallback() {\n  let validatedFields = {};\n\n  return function validationCallback(field, valid, rules) {\n    let formValid = false;\n    let allFieldsValidated = false;\n\n    validatedFields[field.id] = validatedFields[field.id] || {};\n    validatedFields[field.id].valid = valid;\n  \n    if(Object.keys(validatedFields).length === rules.length) {\n      allFieldsValidated = true;\n      formValid = Object.values(validatedFields).every(field => field.valid);\n    }\n  \n    return { formValid, allFieldsValidated };\n  };\n}\n","const errorMessages = require(\"../error-messages\");\nconst { createListFromArray } = require(\"../helpers\");\n\nconst instanceMethodNames = [\n  \"addField\",\n  \"addFields\",\n  \"addRule\",\n  \"addValidator\", \n  \"getValidators\",\n  \"getEffects\",\n  \"getField\",\n  \"getFields\",\n  \"removeRule\",\n  \"toJSON\",\n  \"useEffect\",\n  \"validate\",\n  \"watch\",\n];\n\nconst staticMethodNames = [\"getEffects\", \"useEffect\"];\n\nmodule.exports = { \n  addInstanceMethod,\n  addStaticMethod,\n};\n\n\n/**\n * \n * @param {Function} ctor: a constructor function \n * @param {String} methodName: the method name to bind to instances of that constructor\n */\nfunction addInstanceMethod(ctor, methodName) {\n  if(typeof ctor !== \"function\") {\n    throw new TypeError(\n      errorMessages.functionParamExpectsType\n        .replace(\":param:\", \"ctor\")\n        .replace(\":type:\", \"(constructor) function\")\n    );\n  }\n\n  if(!instanceMethodNames.includes(methodName)) {\n    throw new TypeError(\n      errorMessages.unknownType\n        .replace(\":type:\", \"instance method\")\n        .replace(\":typeName:\", methodName)\n        .replace(\":types:\", \"methods\")\n        .replace(\":allowedTypes:\", createListFromArray(instanceMethodNames))\n    );\n  }\n\n  ctor.prototype[methodName] = require(`./${methodName}`);\n}\n\n/**\n * \n * @param {Function} ctor: a constructor function \n * @param {String} methodName: the method name to bind as a static member to the constructor\n */\nfunction addStaticMethod(ctor, methodName) {\n  if(typeof ctor !== \"function\") {\n    throw new TypeError(\n      errorMessages.functionParamExpectsType\n        .replace(\":param:\", \"ctor\")\n        .replace(\":type:\", \"(constructor) function\")\n    );\n  }\n  \n  if(!staticMethodNames.includes(methodName)) {\n    throw new TypeError(\n      errorMessages.unknownType\n        .replace(\":type:\", \"static method\")\n        .replace(\":typeName:\", methodName)\n        .replace(\":types:\", \"methods\")\n        .replace(\":allowedTypes:\", createListFromArray(staticMethodNames))\n    );\n  }\n  \n  ctor[methodName] = require(`./${methodName}`);\n}","\"use strict\";\n\nconst errorMessages = require(\"./error-messages\");\nconst { is, isSubmitBtn, validateId } = require(\"./helpers\");\nconst { addInstanceMethod, addStaticMethod } = require(\"./methods\");\n\nconst staticMethods = [\"getEffects\", \"useEffect\"];\nconst instanceMethods = [\n  \"addRule\", \"removeRule\", \"getField\", \"getFields\", \n  \"getEffects\", \"useEffect\", \"toJSON\", \"validate\", \"watch\"\n];\n\n\nmodule.exports = SmartForm;\n\n\n/**\n * Create a new SmartForm object.\n * @param {Object|String} the form element to add validation routine to.\n *    This can be the HTML form object if we already have it, or its ID.\n * @param {Array} rules (optional): array of objects specifying the validation rules for the form's elements.\n * @param {String} [rules[i].fieldId]: the id of the input field to apply these rules to\n * @param {Boolean} [rules[i].required]: specifies whether the field is required (true) or not (false)\n * @param {Number|Object} [rules[i].length]: specifies the accepted input length. \n *    If the value is a number, it specifies the maximum length.\n *    If the value is an object, it specifies. the minimum and/or maximum length.\n * @param {Number} [rules[i].length.min]: specifies the mininum accepted input length\n * @param {Number} [rules[i].length.max]: specifies the maximum accepted input length\n * @param {Boolean} [rules[i].matchCase]: performs a case-sensitive (true) or case-insensitive (false) validation.\n * @param {String} [rules[i].type]: the input field's expected data type (alnum|alpha|email|number|text).\n *    Default is alnum.\n * @param {String} [rules[i].regex]: specifies a custom validation regex.\n * \n * @returns this.\n * \n * Before any of the form's fields can have any validation performed on them, \n * a rule must be added to it\n * either during initialization or by calling the addRule(rule) method on the SmartForm instance.\n */\nfunction SmartForm(form, rules) {\n  if(typeof form === \"string\") {\n    form = document.getElementById(form.trim());\n  }\n\n  if(!is.object(form)) {\n    throw new TypeError(\n      errorMessages.htmlElementExpected\n        .replace(\":param:\", \"form\")\n        .replace(\":elementType:\", \"form\")\n    );\n  }\n\n  this.form = form;\n  this.fields = [];\n  const elements = form.elements;\n\n  if(elements) {\n    Array.from(elements).forEach(input => {\n      if(validateId(input.id) || isSubmitBtn(input)) {\n        this.addField(input);\n      }\n    });\n  }\n  \n  if(is.array(rules)) {\n    // Grab a hold of only the input fields passed to our smart-form-validator processor; \n    // Ignore other fields and let the user handle those themselves.\n    rules.forEach(rule => {\n      const input = form.querySelector(`#${rule.fieldId}`);\n\n      if(input && this.getField(input.id)) {\n        this.addRule(rule);\n      }\n    });\n  }\n}\n\nSmartForm.prototype.addField = function addField(element, rule) {\n  const formInputIds = Array.from(this.form.elements).map(el => el.id);\n\n  if(formInputIds.includes(element.id)) {\n    require(\"./methods/addField\").call(this, element, rule);\n  }\n\n  return this;\n};\n\nstaticMethods.forEach(function bindMethodToClass(method) {\n  addStaticMethod(SmartForm, method);\n});\n\ninstanceMethods.forEach(function bindMethodToInstance(method) {\n  addInstanceMethod(SmartForm, method);\n});\n","\"use strict\";\n\nconst { addInstanceMethod, addStaticMethod } = require(\"./methods\");\nconst SmartForm = require(\"./smart-form\");\n\nconst staticMethods = [\"getEffects\", \"useEffect\"];\nconst instanceMethods = [\n  \"addField\", \"addFields\", \"addRule\", \"removeRule\", \"addValidator\", \"getValidators\", \n  \"getField\", \"getFields\", \"getEffects\", \"useEffect\", \"toJSON\", \"validate\", \"watch\"\n];\n\n\nmodule.exports = SmartFormValidator;\n\n\nfunction SmartFormValidator() { \n  this.fields = [];\n  this.form = null;\n}\n\n/**\n * Create a new SmartForm object.\n * @param {Object|String} the HTML form element to add validation routine to.\n *    This can be the HTML form object if we already have it, or its ID.\n * @param {Array} rules (optional): array of objects specifying the validation rules for the form's elements.\n * @param {String} [rules[i].fieldId]: the id of the input field to apply these rules to\n * @param {Boolean} [rules[i].required]: specifies whether the field is required (true) or not (false)\n * @param {Number|Object} [rules[i].length]: specifies the accepted input length. \n *    If the value is a number, it specifies the maximum length.\n *    If the value is an object, it specifies. the minimum and/or maximum length.\n * @param {Number} [rules[i].length.min]: specifies the mininum accepted input length\n * @param {Number} [rules[i].length.max]: specifies the maximum accepted input length\n * @param {Boolean} [rules[i].matchCase]: performs a case-sensitive (true) or case-insensitive (false) validation.\n * @param {String} [rules[i].type]: the input field's expected data type (alnum|alpha|email|number|text).\n *    Default is alnum.\n * @param {String} [rules[i].regex]: specifies a custom validation regex.\n * \n * @returns {Object} SmartForm instance.\n * \n * Before any of the form's fields can have any validation performed on them, \n * a rule must be added to it\n * either here or by calling the addRule(rule) method on the returned SmartForm instance.\n */\nSmartFormValidator.prototype.addForm = function addForm(form, rules) {\n  const smartForm = new SmartForm(form, rules);\n\n  this.form = smartForm.form;\n\n  return smartForm;\n};\n\nstaticMethods.forEach(function bindMethodToClass(method) {\n  addStaticMethod(SmartFormValidator, method);\n});\n\ninstanceMethods.forEach(function bindMethodToInstance(method) {\n  addInstanceMethod(SmartFormValidator, method);\n});\n","\"use strict\";\n\nconst SmartFormValidator = require(\"./smart-form-validator\");\n\nmodule.exports = SmartFormValidator;\n"],"names":["errorMessages","argNamesAreReserved","fieldCannotBeEmpty","fieldNotRegistered","functionParamExpectsType","functionParamIsRequired","htmlElementExpected","noObjectWithSpecifiedKey","noEffectsActive","noValidatorsActive","objectPropertyCannotBeEmpty","objectMustHaveProperty","objectsMustHaveProperty","objectPropertyShouldHaveType","objectWithKeyExists","objectWithKeyExistsCanReplace","unknownType","require$$0","APP_CLASSNAME","SMART_FIELD_CLASSNAME","DISABLED_FIELD_CLASSNAME","VALID_FIELD_CLASSNAME","INVALID_FIELD_CLASSNAME","is","array","isArray","isFunction","number","isNumber","object","isObject","string","isString","clone","cloneAndExtend","has","objectHas","helpers","createListFromArray","generateEffectName","getEffectNames","getValidatorNames","isSubmitBtn","normalizeId","preEffectRegistrationCheck","preValidatorRegistrationCheck","validateId","data","Array","num","Number","isNaN","_typeof","obj","prop","Object","prototype","hasOwnProperty","call","assign","newProps","combinator","concat","join","name","namespace","trim","length","effects","effectObjects","values","effectNames","map","effect","validators","keys","element","type","role","id","String","defaultEffectNames","TypeError","replace","meta","valid","invalid","effectName","includes","_objectSpread","validatorKey","validatorFn","validatorMeta","defaultValidatorKeys","validatorNamespace","generateValidatorKey","Boolean","key","effectsHelpers","isSubmitButton","_require$$","require$$1","addBottomBorder","handleValid","handleInvalid","field","classList","remove","add","addValidationStatusIcons","toggleSubmitButton","init","canSubmitForm","validationPassed","input","submitBtn","removeAttribute","setAttribute","e","console","log","message","require$$2","regexRules","validatorHelpers","createAlphanumericRegexObject","getLengthRegex","getRegexRules","regexStr","rule","emptyLengthCharacter","lenRegex","RegExp","matchCase","lengthRule","len","min","max","tmp","alphanumericValidator","value","allowWhitespace","regex","test","alphaValidator","asciiTextValidator","emailValidator","emailParts","split","_emailParts","_slicedToArray","account","address","domainParts","some","part","lengthValidator","numberValidator","regexValidator","requiredFieldValidator","_","extras","required","passed","checked","require$$3","require$$4","require$$5","require$$6","require$$7","defaultValidators","defaultEffects","defaultValidatorFunctions","entries","smartField","SmartField","getValue","Map","_iterator","_createForOfIteratorHelper","_step","s","n","done","set","err","f","addRule","fieldId","claimField","existingRule","removeRule","getRule","getEffect","toLowerCase","get","getEffects","getActiveEffects","addon","useEffect","parsedEffect","usesEffect","getElement","size","addValidator","hasValidator","getValidators","_input$type","_input$tagName","tagName","_getHtmlSelectElement","getHtmlSelectElementSelectedOption","isContentEditable","textContent","validate","_this$getValidators","addonValidators","from","_this$getEffects","addonEffects","reduce","fn","forEach","_ref","watch","callback","_this","targetEvent","addEventListener","selectElement","text","options","selectedIndex","_input$classList","_input$classList2","addField","document","getElementById","getField","fields","push","addFields","getFields","_i","_Object$values","find","_Object$entries","_Object$entries$_i","validator","getValidator","toJSON","_effect$meta","validated","every","validateFormFields","_fields$find","formValid","form","inputFields","filter","submitButton","rules","classEffects","constructor","instanceEffects","effectFns","validationCallback","getValidationCallback","observeField","getListenerEvent","getChangeProcessor","processInputChange","validationState","allFieldsValidated","applyEffects","validatedFields","instanceMethodNames","staticMethodNames","methods","addInstanceMethod","addStaticMethod","ctor","methodName","require","staticMethods","instanceMethods","smartForm","SmartForm","elements","querySelector","formInputIds","el","bindMethodToClass","method","bindMethodToInstance","smartFormValidator","SmartFormValidator","addForm","src"],"mappings":"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"}